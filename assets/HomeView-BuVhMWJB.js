var S=Object.defineProperty;var V=(r,t,o)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o;var g=(r,t,o)=>V(r,typeof t!="symbol"?t+"":t,o);import{k as E,s as F,_ as N,o as a,a as l,b as e,d as _,l as y,m as j,w as h,v as x,h as $,c as m,i as U,e as w,f as B,j as D,t as v,u as q,r as L,g as b,F as C,n as A,p as I}from"./index-D0-GLUAk.js";class R{constructor(){g(this,"app",null);g(this,"portalElement",null);this.portalElement=document.getElementById("portal")}mount(t){this.app&&this.unmount(),this.app=E(t),this.app.use(F),this.app.mount(this.portalElement)}unmount(){this.app&&(this.app.unmount(),this.app=null)}}const P=new R,H={},M={class:"w-full h-[clamp(30em,calc(100vw/2),50em)] gap-4 bg-gray-900 relative flex items-center justify-center md:justify-start p-[8%]"},Q=e("div",{class:"flex flex-col p-4 gap text-white text-center md:text-left"},[e("span",{style:{"font-variant":"small-caps"},class:"text-xl md:text-3xl"},"homemade category"),e("h2",{style:{"font-variant":"small-caps"},class:"text-3xl md:text-7xl font-bold"},"lucky shop")],-1),T=[Q];function z(r,t){return a(),l("section",M,T)}const G=N(H,[["render",z]]),J=e("button",{type:"submit",class:"px-6 py-2 text-base text-white bg-slate-500 rounded-r-md hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2"}," Search ",-1),K=_({__name:"SearchForm",props:{q:{}},emits:["update:q"],setup(r,{emit:t}){const o=t,c=y(r.q);j(c,p=>{o("update:q",p)});const d=()=>{c.value.trim()&&(o("update:q",c.value.trim()),c.value="")};return(p,n)=>(a(),l("form",{onSubmit:$(d,["prevent"]),class:"flex lg:w-1/3 md:w-3/5"},[h(e("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=i=>c.value=i),placeholder:"Enter your search query",class:"flex-grow px-4 py-2 text-base border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-slate-500 focus:border-transparent"},null,512),[[x,c.value]]),J],32))}}),O={class:"p-6 gap-4 rounded-md flex flex-col shadow bg-white transition-all hover:bg-slate-100"},W=["src","alt"],X={class:"w-full flex flex-col items-center -gap-1"},Y={class:"text-md"},Z=_({__name:"ProductCard",props:{product:{}},setup(r){const{product:t}=r,o=m(()=>t.price);return(s,c)=>{const d=U("router-link");return a(),l("div",O,[e("img",{src:s.product.image,alt:s.product.name,class:"w-full h-60 rounded-md object-contain bg-slate-200"},null,8,W),e("div",X,[w(d,{class:"lowercase text-center",style:{"font-variant":"small-caps"},to:{name:"detail",params:{id:s.product.id}}},{default:B(()=>[D(v(s.product.name),1)]),_:1},8,["to"]),e("b",Y,v(o.value),1)])])}}}),ee=e("header",{class:"flex flex-col items-center w-full"},[e("h2",{class:"font-bold text-xl capitalize"},"Create Product"),e("p",{class:"text-sm"},"Enter product details")],-1),te={class:"flex flex-wrap gap-2"},se=e("div",{class:"flex flex-col gap-1 w-full"},[e("button",{type:"submit",class:"bg-black py-3 rounded-md w-full font-bold text-center text-sm text-white"}," Create Product ")],-1),oe=_({__name:"CreateProductForm",setup(r){const t=y(null),o=q(),s=L({name:"",price:0,description:""});console.log(o);const c=async()=>{const n=new FormData;n.append("name",s.name),n.append("price",s.price.toString()),n.append("description",s.description),t.value&&n.append("image",t.value),await o.dispatch("createProduct",n)},d=()=>{P.unmount()},p=n=>{t.value=n.target.files[0]};return(n,i)=>(a(),l("form",{onSubmit:$(c,["prevent"]),class:"flex flex-col gap-8 w-3/5 md:w-1/2 bg-white py-16 p-8 md:p-14 bg-opacity-80 backdrop-blur-md shadow rounded-md relative"},[e("button",{onClick:d,type:"button",class:"self-end px- py-0.5 text-sm bg-gray-200 rounded-md top-4 right-4 absolute"}," Close "),ee,e("div",te,[h(e("input",{required:"",name:"name",type:"text",placeholder:"Product Name","onUpdate:modelValue":i[0]||(i[0]=u=>s.name=u),class:"bg-white shadow px-4 p-2 border-none rounded-md w-full outline-none"},null,512),[[x,s.name]]),h(e("input",{required:"",name:"price",type:"number",step:"0.01",placeholder:"Price","onUpdate:modelValue":i[1]||(i[1]=u=>s.price=u),class:"bg-white shadow px-4 p-2 border-none rounded-md w-full outline-none"},null,512),[[x,s.price]]),e("input",{required:"",name:"image",type:"file",placeholder:"Image URL",onChange:p,class:"bg-white shadow px-4 p-2 border-none rounded-md w-full outline-none"},null,32),h(e("textarea",{required:"",name:"description",placeholder:"Description","onUpdate:modelValue":i[2]||(i[2]=u=>s.description=u),class:"bg-white shadow px-4 p-2 border-none rounded-md w-full outline-none"},null,512),[[x,s.description]])]),se],32))}}),ae=e("span",{style:{"font-variant":"small-caps"},class:"text-xl md:text-3xl w-full flex items-center gap-4 my-4 before:h-1 before:grow before:bg-black after:h-1 after:grow after:bg-black px-[10%]"}," products ",-1),ne={class:"w-full flex justify-between items-center px-[8%] mb-4"},le={class:"w-full px-[8%] mb-10"},re={key:0,class:"text-center py-8 flex items-center justify-center"},ce=e("div",{class:"w-8 h-8 rounded-full border-t border-t-slate-600 animate-spin"},null,-1),de=[ce],ie={key:1,class:"text-center py-8"},ue={class:"text-red-500"},pe={key:2,class:"text-center py-8 flex flex-col items-center gap-4"},me={key:0},fe={key:1},he={key:3,class:"grid gap-4 grid-cols-[repeat(auto-fill,minmax(14em,1fr))]"},be=_({__name:"HomeView",setup(r){const t=q(),o=async()=>await t.dispatch("getProducts"),s=m(()=>t.state.product),c=m(()=>t.state.account),d=y(""),p=f=>{d.value=f},n=m(()=>s.value.data.filter(f=>f.name.toLowerCase().includes(d.value.toLowerCase()))),i=m(()=>!!c.value.data),u=()=>{P.mount(oe)};return(f,xe)=>(a(),l(C,null,[w(G),ae,e("section",ne,[w(K,{q:d.value,"onUpdate:q":p},null,8,["q"]),i.value?(a(),l("button",{key:0,onClick:u,class:"px-6 py-1 bg-slate-500 text-white rounded hover:bg-slate-600"}," Add Product ")):b("",!0)]),e("section",le,[s.value.loading?(a(),l("div",re,de)):s.value.error?(a(),l("div",ie,[e("p",ue,v(s.value.error),1),e("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Refresh ")])):b("",!0),!s.value.loading&&n.value.length===0?(a(),l("div",pe,[d.value?(a(),l("p",me,"No products match your search.")):(a(),l("p",fe,"No products available.")),d.value?b("",!0):(a(),l("button",{key:2,onClick:o,class:"px-8 py-1 bg-blue-500 text-white rounded-full hover:bg-blue-600"}," Refresh "))])):(a(),l("div",he,[(a(!0),l(C,null,A(n.value,k=>(a(),I(Z,{key:k.id,product:k},null,8,["product"]))),128))]))])],64))}});export{be as default};
